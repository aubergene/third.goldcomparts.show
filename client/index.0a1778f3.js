import{P as t,S as e,i as s,s as r,e as a,t as l,a as n,Q as o,g as c,h as i,j as h,d as f,f as u,k as d,n as m,o as v,w as g,l as p,I as y,q as w,p as E,R as b}from"./client.6a39f6ac.js";import{t as A}from"./tsv.6a7ced64.js";import{f as I,a as N,b as D,s as S}from"./helpers.b84b4fdd.js";import{E as $}from"./constants.11e4a587.js";function k(t){for(var e in t){var s,r,a=t[e].trim();if(a)if("true"===a)a=!0;else if("false"===a)a=!1;else if("NaN"===a)a=NaN;else if(isNaN(s=+a)){if(!(r=a.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;C&&r[4]&&!r[7]&&(a=a.replace(/-/g,"/").replace(/T/," ")),a=new Date(a)}else a=s;else a=null;t[e]=a}return t}var C=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours();function H(t){return t}function R(t,...e){return function(t,e,s,r){return function t(a,l){if(l>=r.length)return s(a);const n=new Map,o=r[l++];let c=-1;for(const t of a){const e=o(t,++c,a),s=n.get(e);s?s.push(t):n.set(e,[t])}for(const[e,s]of n)n.set(e,t(s,l));return e(n)}(t,0)}(t,H,H,e)}const V=t(null,t=>{t(new Date);const e=setInterval(()=>{t(new Date)},1e3);return()=>clearInterval(e)}),{document:T}=b;function x(t,e,s){const r=t.slice();return r[17]=e[s],r}function j(t,e,s){const r=t.slice();return r[17]=e[s],r}function J(t,e,s){const r=t.slice();return r[14]=e[s],r[16]=s,r}function L(t,e,s){const r=t.slice();return r[11]=e[s][0],r[1]=e[s][1],r}function O(t){let e,s;return{c(){e=a("a"),s=l("ONLINE"),this.h()},l(t){e=c(t,"A",{href:!0,class:!0});var r=i(e);s=h(r,"ONLINE"),r.forEach(f),this.h()},h(){d(e,"href","/live"),d(e,"class","rounded-link bd-col-1 col-1 svelte-4rct3y")},m(t,r){m(t,e,r),v(e,s)},d(t){t&&f(e)}}}function B(t){let e,s;return{c(){e=a("a"),s=l("ONLINE"),this.h()},l(t){e=c(t,"A",{href:!0,class:!0});var r=i(e);s=h(r,"ONLINE"),r.forEach(f),this.h()},h(){d(e,"href","/getting-there"),d(e,"class","rounded-link bd-col-1 col-1 svelte-4rct3y")},m(t,r){m(t,e,r),v(e,s)},d(t){t&&f(e)}}}function P(t){let e,s,r,o,p=t[17].name+"";return{c(){e=a("a"),s=l(p),r=n(),this.h()},l(t){e=c(t,"A",{href:!0,class:!0});var a=i(e);s=h(a,p),r=u(a),a.forEach(f),this.h()},h(){d(e,"href",o="artists/"+t[17].slug),d(e,"class","artist-name col-5 svelte-4rct3y")},m(t,a){m(t,e,a),v(e,s),v(e,r)},p(t,r){1&r&&p!==(p=t[17].name+"")&&g(s,p),1&r&&o!==(o="artists/"+t[17].slug)&&d(e,"href",o)},d(t){t&&f(e)}}}function F(t){let e,s,r,l;return{c(){e=a("a"),s=a("span"),r=n(),this.h()},l(t){e=c(t,"A",{href:!0});var a=i(e);s=c(a,"SPAN",{class:!0,style:!0}),i(s).forEach(f),r=u(a),a.forEach(f),this.h()},h(){d(s,"class","bio-photo svelte-4rct3y"),p(s,"background-image","url(img/bios/"+t[17].username+".jpeg)"),d(e,"href",l="artists/"+t[17].slug)},m(t,a){m(t,e,a),v(e,s),v(e,r)},p(t,r){1&r&&p(s,"background-image","url(img/bios/"+t[17].username+".jpeg)"),1&r&&l!==(l="artists/"+t[17].slug)&&d(e,"href",l)},d(t){t&&f(e)}}}function G(t){let e,s,r,o,p,w,E,b,A,N,S,$,k,C,H,R,V,T,J,L,G,M,Y,q,Q=D(t[14].startsAt)+"",Z=I(t[14].startsAt)+"",_=t[14].title+"",z=t[14].desc+"",K=t[14].livestream&&O(),U=t[14].physical&&B(),W=t[14].artists,X=[];for(let e=0;e<W.length;e+=1)X[e]=P(j(t,W,e));let tt=t[14].artists,et=[];for(let e=0;e<tt.length;e+=1)et[e]=F(x(t,tt,e));return{c(){e=a("div"),s=a("div"),r=a("div"),K&&K.c(),o=n(),U&&U.c(),p=n(),w=a("div"),E=a("div"),b=l(Q),A=n(),N=l(Z),S=n(),$=a("div"),k=l(_),C=n(),H=a("div"),R=l(z),V=n();for(let t=0;t<X.length;t+=1)X[t].c();T=n(),J=a("div");for(let t=0;t<et.length;t+=1)et[t].c();L=n(),this.h()},l(t){e=c(t,"DIV",{id:!0,class:!0,live:!0,physical:!0});var a=i(e);s=c(a,"DIV",{class:!0});var l=i(s);r=c(l,"DIV",{class:!0});var n=i(r);K&&K.l(n),o=u(n),U&&U.l(n),n.forEach(f),p=u(l),w=c(l,"DIV",{class:!0});var d=i(w);E=c(d,"DIV",{class:!0});var m=i(E);b=h(m,Q),A=u(m),N=h(m,Z),m.forEach(f),S=u(d),$=c(d,"DIV",{class:!0});var v=i($);k=h(v,_),v.forEach(f),C=u(d),H=c(d,"DIV",{class:!0});var g=i(H);R=h(g,z),g.forEach(f),V=u(d);for(let t=0;t<X.length;t+=1)X[t].l(d);d.forEach(f),T=u(l),J=c(l,"DIV",{class:!0});var y=i(J);for(let t=0;t<et.length;t+=1)et[t].l(y);y.forEach(f),l.forEach(f),L=u(a),a.forEach(f),this.h()},h(){d(r,"class","column is-1 location-data svelte-4rct3y"),d(E,"class","event-time col-3 svelte-4rct3y"),d($,"class","event-title svelte-4rct3y"),d(H,"class","event-description svelte-4rct3y"),d(w,"class","column is-9"),d(J,"class","column text-align-right svelte-4rct3y"),d(s,"class","columns"),d(e,"id",G=t[14].id),d(e,"class",M=" event "+t[2](t[14])+" svelte-4rct3y"),d(e,"live",Y=t[14].livestream),d(e,"physical",q=t[14].physical)},m(t,a){m(t,e,a),v(e,s),v(s,r),K&&K.m(r,null),v(r,o),U&&U.m(r,null),v(s,p),v(s,w),v(w,E),v(E,b),v(E,A),v(E,N),v(w,S),v(w,$),v($,k),v(w,C),v(w,H),v(H,R),v(w,V);for(let t=0;t<X.length;t+=1)X[t].m(w,null);v(s,T),v(s,J);for(let t=0;t<et.length;t+=1)et[t].m(J,null);v(e,L)},p(t,s){if(t[14].livestream?K||(K=O(),K.c(),K.m(r,o)):K&&(K.d(1),K=null),t[14].physical?U||(U=B(),U.c(),U.m(r,null)):U&&(U.d(1),U=null),1&s&&Q!==(Q=D(t[14].startsAt)+"")&&g(b,Q),1&s&&Z!==(Z=I(t[14].startsAt)+"")&&g(N,Z),1&s&&_!==(_=t[14].title+"")&&g(k,_),1&s&&z!==(z=t[14].desc+"")&&g(R,z),1&s){let e;for(W=t[14].artists,e=0;e<W.length;e+=1){const r=j(t,W,e);X[e]?X[e].p(r,s):(X[e]=P(r),X[e].c(),X[e].m(w,null))}for(;e<X.length;e+=1)X[e].d(1);X.length=W.length}if(1&s){let e;for(tt=t[14].artists,e=0;e<tt.length;e+=1){const r=x(t,tt,e);et[e]?et[e].p(r,s):(et[e]=F(r),et[e].c(),et[e].m(J,null))}for(;e<et.length;e+=1)et[e].d(1);et.length=tt.length}1&s&&G!==(G=t[14].id)&&d(e,"id",G),1&s&&M!==(M=" event "+t[2](t[14])+" svelte-4rct3y")&&d(e,"class",M),1&s&&Y!==(Y=t[14].livestream)&&d(e,"live",Y),1&s&&q!==(q=t[14].physical)&&d(e,"physical",q)},d(t){t&&f(e),K&&K.d(),U&&U.d(),y(X,t),y(et,t)}}}function M(t){let e,s,r,p,w,E=N(t[1][0].startsAt)+"",b=t[1],A=[];for(let e=0;e<b.length;e+=1)A[e]=G(J(t,b,e));return{c(){e=a("h2"),s=l(E),p=n();for(let t=0;t<A.length;t+=1)A[t].c();w=o(),this.h()},l(t){e=c(t,"H2",{id:!0,class:!0});var r=i(e);s=h(r,E),r.forEach(f),p=u(t);for(let e=0;e<A.length;e+=1)A[e].l(t);w=o(),this.h()},h(){d(e,"id",r=I(t[1][0].startsAt).toLowerCase()),d(e,"class","svelte-4rct3y")},m(t,r){m(t,e,r),v(e,s),m(t,p,r);for(let e=0;e<A.length;e+=1)A[e].m(t,r);m(t,w,r)},p(t,a){if(1&a&&E!==(E=N(t[1][0].startsAt)+"")&&g(s,E),1&a&&r!==(r=I(t[1][0].startsAt).toLowerCase())&&d(e,"id",r),5&a){let e;for(b=t[1],e=0;e<b.length;e+=1){const s=J(t,b,e);A[e]?A[e].p(s,a):(A[e]=G(s),A[e].c(),A[e].m(w.parentNode,w))}for(;e<A.length;e+=1)A[e].d(1);A.length=b.length}},d(t){t&&f(e),t&&f(p),y(A,t),t&&f(w)}}}function Y(t){let e,s,r,o,g,p,b,A,I,N,D,S,k,C,H,R,V,x,j,J,O,B,P,F,G,Y,q=t[0],Q=[];for(let e=0;e<q.length;e+=1)Q[e]=M(L(t,q,e));return{c(){e=n(),s=a("section"),r=a("div"),o=a("div"),g=a("h2"),p=l("Events"),b=n(),A=a("p"),I=l("The online component of Chimera Garden features a mixture of live\n        performance, discussion and demonstrations, streamed directly from St\n        James Hatcham Church and remote artists’ locations. You will be able to\n        catch the online stream "),N=a("a"),D=l("here on our website"),S=l(" during the\n        show."),k=n(),C=a("p"),H=l("Below you can find the line up of events, some that will be happening\n        physically in St James Hatcham Church and those that will be streaming\n        online. Below you can register for free tickets for the online events.\n        If you would like to visit us at St James Hatcham Church please read our\n        "),R=a("a"),V=l("safety guidelines and register here."),x=n(),j=a("h2"),J=l("Schedule"),O=n(),B=a("div"),P=n(),F=a("a"),G=l("Free online tickets"),Y=n();for(let t=0;t<Q.length;t+=1)Q[t].c();this.h()},l(t){w('[data-svelte="svelte-1llonc1"]',T.head).forEach(f),e=u(t),s=c(t,"SECTION",{class:!0});var a=i(s);r=c(a,"DIV",{class:!0});var l=i(r);o=c(l,"DIV",{class:!0});var n=i(o);g=c(n,"H2",{class:!0});var d=i(g);p=h(d,"Events"),d.forEach(f),b=u(n),A=c(n,"P",{});var m=i(A);I=h(m,"The online component of Chimera Garden features a mixture of live\n        performance, discussion and demonstrations, streamed directly from St\n        James Hatcham Church and remote artists’ locations. You will be able to\n        catch the online stream "),N=c(m,"A",{href:!0});var v=i(N);D=h(v,"here on our website"),v.forEach(f),S=h(m," during the\n        show."),m.forEach(f),k=u(n),C=c(n,"P",{});var y=i(C);H=h(y,"Below you can find the line up of events, some that will be happening\n        physically in St James Hatcham Church and those that will be streaming\n        online. Below you can register for free tickets for the online events.\n        If you would like to visit us at St James Hatcham Church please read our\n        "),R=c(y,"A",{href:!0});var E=i(R);V=h(E,"safety guidelines and register here."),E.forEach(f),y.forEach(f),x=u(n),j=c(n,"H2",{class:!0});var $=i(j);J=h($,"Schedule"),$.forEach(f),O=u(n),B=c(n,"DIV",{});var L=i(B);P=u(L),F=c(L,"A",{class:!0,href:!0,target:!0});var M=i(F);G=h(M,"Free online tickets"),M.forEach(f),L.forEach(f),Y=u(n);for(let t=0;t<Q.length;t+=1)Q[t].l(n);n.forEach(f),l.forEach(f),a.forEach(f),this.h()},h(){T.title="Schedule - Final Show - 2020",d(g,"class","svelte-4rct3y"),d(N,"href","/live"),d(R,"href","/getting-there"),d(j,"class","svelte-4rct3y"),d(F,"class","rounded-link bd-col-2 col-2"),d(F,"href",$),d(F,"target","_blank"),d(o,"class","content"),d(r,"class","container page-max-width"),d(s,"class","section bg-col-7")},m(t,a){m(t,e,a),m(t,s,a),v(s,r),v(r,o),v(o,g),v(g,p),v(o,b),v(o,A),v(A,I),v(A,N),v(N,D),v(A,S),v(o,k),v(o,C),v(C,H),v(C,R),v(R,V),v(o,x),v(o,j),v(j,J),v(o,O),v(o,B),v(B,P),v(B,F),v(F,G),v(o,Y);for(let t=0;t<Q.length;t+=1)Q[t].m(o,null)},p(t,[e]){if(5&e){let s;for(q=t[0],s=0;s<q.length;s+=1){const r=L(t,q,s);Q[s]?Q[s].p(r,e):(Q[s]=M(r),Q[s].c(),Q[s].m(o,null))}for(;s<Q.length;s+=1)Q[s].d(1);Q.length=q.length}},i:E,o:E,d(t){t&&f(e),t&&f(s),y(Q,t)}}}async function q({params:t}){return{scheduleRows:await this.fetch("schedule.tsv").then(t=>t.text()),artistsRows:await this.fetch("artists.tsv").then(t=>t.text())}}function Q(t,e,s){let r,a,l,n,o,{scheduleRows:c}=e,{artistsRows:i}=e,h=new Map;return t.$$set=t=>{"scheduleRows"in t&&s(3,c=t.scheduleRows),"artistsRows"in t&&s(4,i=t.artistsRows)},t.$$.update=()=>{56&t.$$.dirty&&(s(5,r=A(i)),r.forEach(t=>{h.set(t.username,t),t.slug=S(t.name)}),s(1,a=A(c,k).map(t=>(t.artists=[],t.username&&t.username.trim()&&t.username.split(/,\s*/).forEach(e=>{const s=h.get(e);s?t.artists.push(s):console.log(`Couldn't find "${e}"`)}),t.startsAt=new Date(t.startTime),t)).filter(t=>t.startTime))),2&t.$$.dirty&&s(6,l=a.filter(t=>!0)),64&t.$$.dirty&&s(7,n=R(l,t=>t.startTime.toISOString().slice(0,10))),128&t.$$.dirty&&s(0,o=Array.from(n.entries()).sort((t,e)=>function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}(t[0],e[0])).map(([t,e])=>(e.sort((t,e)=>t.startsAt-e.startsAt),[t,e])))},[o,a,function(t){return function(t){return t.endsAt<V}(t)?"bd-col-7":function(t){return t.startsAt>=V&&t.endsAt<V}(t.startsAt)?"bd-col-1":void 0},c,i]}export default class extends e{constructor(t){super(),s(this,t,Q,Y,r,{scheduleRows:3,artistsRows:4})}}export{q as preload};
